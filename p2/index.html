<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thai Language Game P.2</title>
    <style>
        :root { --primary: #ff6b6b; --secondary: #4ecdc4; }
        body { margin: 0; font-family: 'Sarabun', sans-serif; overflow: hidden; background: #f0f2f5; }
        
        /* Classroom Tools Style */
        .tool-box { position: absolute; z-index: 100; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); padding: 10px; cursor: move; }
        
        /* 1. Timer */
        #timer-tool { top: 20px; right: 20px; width: 150px; text-align: center; resize: both; overflow: auto; }
        #timer-display { font-size: 2rem; font-weight: bold; color: var(--primary); }

        /* 2. Randomizer */
        #random-tool { bottom: 20px; left: 20px; width: 200px; text-align: center; }
        #number-display { font-size: 3rem; height: 80px; line-height: 80px; background: #333; color: #0f0; border-radius: 10px; margin: 10px 0; }

        /* 3. Whiteboard */
        #drawing-canvas { position: absolute; top: 0; left: 0; z-index: 10; pointer-events: none; }
        .canvas-active { pointer-events: auto !important; cursor: crosshair; }
        .drawing-controls { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); z-index: 101; display: flex; gap: 10px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 20px; }

        /* Content Sidebar */
        #sidebar { position: absolute; left: 0; top: 0; width: 250px; height: 100%; background: #2c3e50; color: white; padding: 20px; z-index: 50; transition: 0.3s; }
        .lesson-btn { display: block; width: 100%; padding: 10px; margin-bottom: 5px; background: #34495e; border: none; color: white; text-align: left; cursor: pointer; border-radius: 5px; }
        .lesson-btn:hover { background: var(--secondary); }
    </style>
</head>
<body>

<div class="drawing-controls">
    <input type="color" id="penColor" value="#ff0000">
    <button onclick="toggleDraw()">üñåÔ∏è ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô/‡∏õ‡∏¥‡∏î</button>
    <button onclick="clearCanvas()">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</button>
</div>

<div id="timer-tool" class="tool-box" draggable="true">
    <div id="timer-display">00:00</div>
    <input type="number" id="timeInput" placeholder="‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ" style="width: 60px;">
    <button onclick="startTimer()">‡πÄ‡∏£‡∏¥‡πà‡∏°</button>
</div>

<div id="random-tool" class="tool-box">
    <div id="number-display">?</div>
    <input type="number" id="minNum" value="1" style="width: 40px;"> - 
    <input type="number" id="maxNum" value="40" style="width: 40px;">
    <button onclick="startRandom()">‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</button>
</div>

<div id="sidebar">
    <h3>üìñ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏õ.2</h3>
    <button class="lesson-btn" onclick="loadLesson('‡∏™‡∏£‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢ (‡∏ô.22)')">‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢</button>
    <button class="lesson-btn" onclick="loadLesson('‡∏Ñ‡∏≥‡∏Ñ‡∏ß‡∏ö‡∏Å‡∏•‡πâ‡∏≥ (‡∏ô.37)')">‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏Ñ‡∏≥‡∏Ñ‡∏ß‡∏ö‡∏Å‡∏•‡πâ‡∏≥</button>
    <button class="lesson-btn" onclick="loadLesson('‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô (‡∏ô.70)')">‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: ‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô</button>
    <button class="lesson-btn" onclick="loadLesson('‡∏°‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡πÑ‡∏ó‡∏¢ (‡∏ô.65)')">‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: ‡∏°‡∏≤‡∏£‡∏¢‡∏≤‡∏ó</button>
</div>

<div id="game-content" style="margin-left: 270px; padding: 50px; text-align: center;">
    <h1 id="lesson-title">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
    <div id="exercise-area" style="font-size: 2rem; background: white; padding: 40px; border-radius: 20px;">
        </div>
</div>

<canvas id="drawing-canvas"></canvas>

<script>
    // --- 1. Timer Logic ---
    let timer;
    function startTimer() {
        clearInterval(timer);
        let time = document.getElementById('timeInput').value;
        const display = document.getElementById('timer-display');
        timer = setInterval(() => {
            let mins = Math.floor(time / 60);
            let secs = time % 60;
            display.innerText = `${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
            if (time <= 0) { clearInterval(timer); alert("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!"); }
            time--;
        }, 1000);
    }

    // --- 2. Randomizer Logic ---
    function startRandom() {
        const min = parseInt(document.getElementById('minNum').value);
        const max = parseInt(document.getElementById('maxNum').value);
        const display = document.getElementById('number-display');
        let count = 0;
        let interval = setInterval(() => {
            display.innerText = Math.floor(Math.random() * (max - min + 1)) + min;
            count++;
            if (count > 20) { // ‡∏ß‡∏¥‡πà‡∏á 20 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏¢‡∏∏‡∏î
                clearInterval(interval);
                display.style.color = "yellow";
                setTimeout(() => display.style.color = "#0f0", 1000);
            }
        }, 50); // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏¥‡πà‡∏á
    }

    // --- 3. Whiteboard Logic ---
    const canvas = document.getElementById('drawing-canvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function toggleDraw() {
        canvas.classList.toggle('canvas-active');
    }

    canvas.addEventListener('mousedown', (e) => { drawing = true; draw(e); });
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', () => { drawing = false; ctx.beginPath(); });

    function draw(e) {
        if (!drawing || !canvas.classList.contains('canvas-active')) return;
        ctx.lineWidth = 5;
        ctx.lineCap = 'round';
        ctx.strokeStyle = document.getElementById('penColor').value;
        ctx.lineTo(e.clientX, e.clientY);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.clientX, e.clientY);
    }

    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

    // --- 4. Content Logic ---
    function loadLesson(title) {
        document.getElementById('lesson-title').innerText = title;
        let content = "";
        if(title.includes('‡∏™‡∏£‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢')) content = "‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡∏≥‡∏™‡∏£‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢: ‡∏ô_ _ , ‡πÄ_ _ ‡∏¢ , ‡πÄ_ _ ‡∏¢‡∏ô"; [cite: 45]
        if(title.includes('‡∏Ñ‡∏≥‡∏Ñ‡∏ß‡∏ö‡∏Å‡∏•‡πâ‡∏≥')) content = "‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏≥‡∏Ñ‡∏ß‡∏ö‡∏Å‡∏•‡πâ‡∏≥: ‡∏û‡∏£‡∏¥‡∏Å, ‡∏Å‡∏•‡∏≠‡∏á, ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°, ‡∏õ‡∏•‡∏≤"; [cite: 55]
        if(title.includes('‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô')) content = "‡∏ß‡∏¥‡∏ò‡∏µ‡∏•‡∏î‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô: ‡πÉ‡∏ä‡πâ‡∏ñ‡∏∏‡∏á‡∏ú‡πâ‡∏≤, ‡∏õ‡∏•‡∏π‡∏Å‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ"; [cite: 70]
        document.getElementById('exercise-area').innerText = content;
    }

    // Make tools draggable
    const tools = document.querySelectorAll('.tool-box');
    tools.forEach(tool => {
        tool.onmousedown = function(e) {
            let shiftX = e.clientX - tool.getBoundingClientRect().left;
            let shiftY = e.clientY - tool.getBoundingClientRect().top;
            function moveAt(pageX, pageY) {
                tool.style.left = pageX - shiftX + 'px';
                tool.style.top = pageY - shiftY + 'px';
            }
            function onMouseMove(e) { moveAt(e.pageX, e.pageY); }
            document.addEventListener('mousemove', onMouseMove);
            tool.onmouseup = function() {
                document.removeEventListener('mousemove', onMouseMove);
                tool.onmouseup = null;
            };
        };
        tool.ondragstart = function() { return false; };
    });
</script>

</body>
</html>
